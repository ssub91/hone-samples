CREATE TABLE TEST_CUSTOMER
(
	CUSTOMER_ID VARCHAR2(15)  PRIMARY KEY NOT NULL ,
	CUSTOMER_NAME VARCHAR2(50) ,
	BIRTHDAY VARCHAR2(8)  ,
	JOB VARCHAR2(15)  ,
	DESCRIPTION VARCHAR2(150)  
);

CREATE TABLE TBMSG001
(
	MSG_ID  VARCHAR2(5)  PRIMARY KEY NOT NULL ,
	MSG_NM VARCHAR2(50),
	MSG_ETC VARCHAR2(1000),
	MSG_TYPE  VARCHAR2(1),
	DEL_FLAG  VARCHAR2(1)
);


-- for BLOB Example

CREATE TABLE IMAGE_TABLE
(
	NO	 NUMBER(10) PRIMARY KEY NOT NULL,
	DATA	 BLOB
);

CREATE SEQUENCE IMAGE_TABLE_SEQ
START WITH 1 
INCREMENT BY 1 
MAXVALUE 9999999999;


-- for Stored Procedure
CREATE OR REPLACE PROCEDURE IMAGE_ARCHIVING(
    
	P_NO       IN  NUMBER,
    O_DATA     OUT BLOB,
    O_FILENAME OUT VARCHAR2 ) IS

BEGIN
	
    SELECT DATA, 'ARCHIVING_'||NO||'_'||TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')||'.JPG'
      INTO O_DATA, O_FILENAME
      FROM IMAGE_TABLE
     WHERE NO = P_NO;
    
    DELETE
      FROM IMAGE_TABLE
     WHERE NO = P_NO;
     
END IMAGE_ARCHIVING;

